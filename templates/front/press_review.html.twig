{% extends 'front_base.html.twig' %}

{% block title %}Boîte à souvenir{% endblock %}

{% block stylesheets %}
    {{ parent() }}
{% endblock %}

{% block main %}

    <navigate-js>

        <link rel="stylesheet" href="{{ asset('css/front/press_review.css') }}" data-njs>

        <section id="press-review">

            <div class="container">

                <h1 class="text-center">Revue de presse</h1>

                <a href="{{ asset('img/press_review/Revue de Presse _ LBAS_01-24 (1).pdf') }}" download="" class="main-btn download"><i class="icon-download"></i> Revue de presse complète</a>

                <section class="main-press">
                    <div class="left">
                        <div class="press-item">
                            <figure class="press-thumb" data-modal-id="preview-img-1">
                                <img src="{{ asset('img/press_review/radio.png') }}" alt="Photo de passages radios">
                            </figure>
                            <div class="press-info">
                                <span class="title">Interviews radio</span>
                                <span class="date">2022 - 2023 - 2024</span>
                            </div>
                        </div>
                        <div class="press-item">
                            <figure class="press-thumb" data-modal-id="preview-img-2">
                                <img src="{{ asset('img/press_review/france_3.png') }}" alt="Capture d'écran d'un reportage vidéo France 3 PACA">
                            </figure>
                            <div class="press-info">
                                <span class="title">France 3 Provence-Alpes Côte d’Azur</span>
                                <a href="https://www.youtube.com/watch?v=T4nIOl8i2Wk" target="_blank" class="press-link">Consulter la ressource</a>
                                <span class="date">23 mai 2023</span>
                            </div>
                        </div>
                    </div>
                    <div class="right">
                        <div class="press-item">
                            <figure class="press-thumb preview" data-modal-id="preview-pdf">
                                <img src="{{ asset('img/press_review/la_provence.PNG') }}" alt="Photo d'un article de presse de la provence">
                            </figure>
                            <div class="press-info">
                                <span class="title">La Provence</span>
                                <span class="date">23 décembre 2023</span>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <div id="preview-img-1" class="preview-img layout-modal">
                <div class="modal-content">
                    <span class="close-layout-modal">&times;</span>
                    <img src="{{ asset('img/press_review/radio.png') }}" alt="Photo de passages radios">
                </div>
            </div>

            <div id="preview-img-2" class="preview-img layout-modal">
                <div class="modal-content">
                    <span class="close-layout-modal">&times;</span>
                    <img src="{{ asset('img/press_review/france_3.png') }}" alt="Capture d'écran d'un reportage vidéo France 3 PACA">
                </div>
            </div>

            <div id="preview-pdf" class="layout-modal">
                <div class="modal-content">
                    <span class="close-layout-modal">&times;</span>
                    <embed src="{{ asset('img/press_review/la_provence.pdf') }}" width="100%" height="90%" type="application/pdf"/>
                </div>
            </div>

        </section>

        <script data-njs>
            // Somehow, all modal don't work when the page is loaded with navigate-js, so we need to re-append them to the modals-wrapper and re-attach the event listener
            if (document.querySelector('navigate-js').classList.contains('njs-page-loaded')) {
                init();
            }

            document.addEventListener('DOMContentLoaded', () => {
                setTimeout(() => {
                    closeLayoutModal();
                }, 500);
            });

            function init() {
                document.querySelectorAll('.layout-modal').forEach(modal => {
                    document.getElementById('modals-wrapper').appendChild(modal);
                })

                document.getElementById('press-review').querySelectorAll('[data-modal-id]').forEach(btn => {
                    let modal = document.getElementById(btn.dataset.modalId);
                    btn.addEventListener('click', () => openCloseModal(modal, document.querySelector('.overlay')));
                });

                closeLayoutModal();
            }
        </script>

    </navigate-js>

{% endblock %}

{% block javascripts %}
    {{ parent() }}
{% endblock %}
